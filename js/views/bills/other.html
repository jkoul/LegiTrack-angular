<h2>DC Council Legislation</h2>
<div class="filters">
  <h3>Filter Bills by:</h3>
  <form name="sortForm" class="options">
    <label>Committee
      <input type="checkbox" value="committees">
    </label>
    <label>Sponsor
      <input type="checkbox" value="sponsor">
    </label>
    <label>Status
      <input type="checkbox" value="status">
    </label>
    <label>Popularity
      <input type="checkbox" value="status">
    </label>
  </form>
</div>
<h4 class="load-note">Please be patient: bills may take a few seconds to appear</h4>
<div class="results">Number of results: {{billsCtrl.count()}}</div>
<div class="bills" ng-repeat="bill in billsCtrl.bills | filter:query | orderBy:'bill_id'">
  <div class="bill" ng-if="(bill.bill_id.indexOf('CA') == 0) || (bill.bill_id.indexOf('GBM') == 0) || (bill.bill_id.indexOf('REP') == 0) || (bill.bill_id.indexOf('HFA') == 0) || (bill.bill_id.indexOf('AU') == 0) || (bill.bill_id.indexOf('RC') == 0) || (bill.bill_id.indexOf('IG') == 0) || (bill.bill_id.indexOf('CFO') == 0)">
    <h3><a ng-href="/#/bills/{{bill.bill_id}}">{{bill.bill_id}} - {{bill.title}}</a></h3>
    <h4>Type:
      <span ng-if="bill.bill_id.indexOf('B') == 0">Bill</span>
      <span ng-if="bill.bill_id.indexOf('PR') == 0">Resolution</span>
      <span ng-if="bill.bill_id.indexOf('CER') == 0">Ceremonial Resolution</span>
      <span ng-if="bill.bill_id.indexOf('CA') == 0">Contract</span>
      <span ng-if="bill.bill_id.indexOf('GBM') == 0">Grant Budget Modification</span>
      <span ng-if="bill.bill_id.indexOf('REP') == 0">Budget Reallocation</span>
      <span ng-if="bill.bill_id.indexOf('HFA') == 0">Housing Finance Agency Bond Issuance</span>
      <span ng-if="bill.bill_id.indexOf('AU') == 0">Audit Report</span>
      <span ng-if="(bill.bill_id.indexOf('RC') == 0) || (bill.bill_id.indexOf('IG') == 0) || (bill.bill_id.indexOf('CFO') == 0)">Other Report</span>
    </h4>
    <span ng-if="bill.actions != ''">
      <p>Date Introduced: {{bill.action_dates.first}}</p>
      <p>Latest Action: {{bill.action_dates.last}}</p>
    </span>
    <span ng-repeat="update in bill.actions | filter:{$: 'committee'}">
      <p>Committee: {{update.related_entities[0].name}}</p>
    </span>
    <span ng-repeat="sponsor in bill.sponsors | filter:{$: 'primary'}">
      <p>Sponsor: {{sponsor.name}}</p>
    </span>
    <span ng-repeat="sponsor in bill.sponsors | filter:{$: 'cosponsor'}">
      <p>Co-Sponsor: {{sponsor.name}}</p>
    </span>
  </div>
  <div class="votes">
    <span><i class="fa fa-thumbs-up" ng-click="bill.upvote()"></i>{{bill.score.supporting}}</span>
    <span><i class="fa fa-thumbs-down" ng-click="bill.downvote()"></i>{{bill.score.opposing}}</span>
  </div>
</div>
